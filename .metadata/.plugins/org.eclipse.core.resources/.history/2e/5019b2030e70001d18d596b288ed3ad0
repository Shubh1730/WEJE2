package com.jspider.hibernate.dao;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;
import javax.transaction.TransactionalException;

import com.jspider.hibernate.dto.StudentDTO;

public class StudentDao {
 private static EntityManagerFactory factory;
 private static EntityManager maneger;
 private static EntityTransaction transaction;
 
 private static void openConnection() {
	 factory=Persistence.createEntityManagerFactory("Student");
	 maneger=factory.createEntityManager();
	 transaction=maneger.getTransaction();
 }
 private static void closeConnection() {
	 if(factory != null) {
		 factory.close();
	 }
	 if(maneger !=null) {
		 maneger.close();
	 }
	 try {
		transaction.rollback();
	} catch (TransactionalException e) {
		System.out.println("transaction is commited");
	}
 } 

 public static void main(String[] args) {
	try {
		openConnection();
		transaction.begin();
		
		StudentDao student = new StudentDao();
		student.setId(1);
		student.setName("ajay");
		student.setEmail("vijay12@gmail.com");
		student.setCont(1234567890L);
		maneger.persist(student);
		transaction.commit();
	} finally {
		closeConnection();
		
		
	}
}
}
